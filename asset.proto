syntax = "proto3";

package asset;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/sologenic/com-fs-asset-model;asset";

message Asset {
    // Key combination: Currency-OrganizationID-Version
    string OrganizationID = 1; // External entity (broker) that owns this asset, e.g. issuer
    AssetStatus Status = 2;
    optional Reason Reason = 3;
    repeated string Jurisdictions = 4; // list of jurisdictions where this asset is allowed to be traded
    string Network = 5;
    google.protobuf.Timestamp CreatedAt = 6;
    google.protobuf.Timestamp UpdatedAt = 7;
    AssetType Type = 8;

    // Flattened StockProperties
    string Symbol = 9; // Currency-OrganizationID(issuer) 
    string Currency = 10;
    string Version = 11;
    int32 Precision = 12;
    string Name = 13;
    string ExchangeTickerSymbol = 14;
    string Exchange = 15;
    string Description = 16;
}

message Assets {
    repeated Asset Assets = 1;
}

message UserAssetList {
    string ID = 1; // UUID
    string UserID = 2;
    string Wallet = 3;
    string AssetID = 4; // UUID of the asset
    UserAssetStatus Status = 5;
    string Network = 6;
    bool Visible = 7;
    google.protobuf.Timestamp CreatedAt = 8;
    google.protobuf.Timestamp UpdatedAt = 9;
}

message UserAssetLists {
    repeated UserAssetList UserAssetLists = 1;
}

message Jurisdiction {
    string ID = 1; // UUID
    string OrganizationID = 2;
    string Name = 3;
    string Description = 4;
    string ExternalID = 5;
    string Network = 6;
    google.protobuf.Timestamp CreatedAt = 7;
    google.protobuf.Timestamp UpdatedAt = 8;
}

message Jurisdictions {
    repeated Jurisdiction Jurisdictions = 1;
}

message UserJurisdiction {
    string Id = 1; // UUID
    string UserID = 2;
    string Wallet = 3;
    string JurisdictionID = 4;
    UserJurisdictionStatus Status = 5;
    google.protobuf.Timestamp CreatedAt = 6;
    google.protobuf.Timestamp UpdatedAt = 7;
    string Network = 8;
}

message UserJurisdictions {
    repeated UserJurisdiction UserJurisdictions = 1;
}

enum AssetStatus {
    ASSET_STATUS_DO_NOT_USE = 0;
    DO_NOT_LIST = 1; // Organization admin only
    REQUEST_LISTING = 2; // Organization admin only
    LISTED = 3; // Super admin only
    SUPER_ADMIN_DO_NOT_LIST = 4; // Super admin only 
}

enum Reason {
    REASON_DO_NOT_USE = 0;
    DUPLICATE = 1;
    UNWANTED_ASSET = 2;
    UNSTABLE_ASSET = 3;
}

enum AssetType {
    ASSET_TYPE_DO_NOT_USE = 0;
    STOCK = 1;
}

enum UserAssetStatus {
    USER_ASSET_STATUS_DO_NOT_USE = 0;
    NOT_WHITELISTED = 1;
    WHITELISTING_REQUESTED = 2;
    WHITELISTED = 3;
    OUTDATED_VERSION = 4;
}

enum UserJurisdictionStatus {
    USER_JURISDICTION_STATUS_DO_NOT_USE = 0;
    ALLOWED = 1;
    NOT_ALLOWED = 2;
}